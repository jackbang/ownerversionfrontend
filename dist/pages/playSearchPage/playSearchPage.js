(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[12],{105:function(t,e,s){t.exports=s.p+"img/background2.jpg"},168:function(t,e,s){t.exports=s.p+"img/moreIcon.svg"},292:function(t,e,s){},301:function(t,e,s){"use strict";s.r(e);var a=s(6),o=s(25),i=s(9),l=s(11),c=s(16),n=s(17),r=s(2),h=s(3),p=s.n(h),d=s(0),u=s(5),m=(s(292),s(10)),y=s.n(m),j=(s(41),s(78),s(33)),b=s.n(j),g=s(32),f=s.n(g),x=s(30),S=s.n(x),v=s(105),O=s.n(v),N=s(168),k=s.n(N),w=s(14),T=s(12),_=s(1),q=function(t){Object(c["a"])(s,t);var e=Object(n["a"])(s);function s(){var t;return Object(i["a"])(this,s),t=e.apply(this,arguments),t.state={showPop:0,value:"",totalStatus:{tagActiveNum:0,type1:"",type2:"",type3:"",page:1},storeStatus:{tagActiveNum:0,type1:"",type2:"",type3:"",page:1},adminInfo:{},storeInfo:{},permission:0,listLoading:!0,totalPlays:[],storePlays:[],current:0,totalScrollTop:0,storeScrollTop:0,playInfo:{play_name:"\u6728\u516e\u50e7\u4e4b\u620f",play_headcount:7,play_male_num:4,play_female_num:3}},t}return Object(l["a"])(s,[{key:"componentWillMount",value:function(){this.state.adminInfo=p.a.getStorageSync("admin_info"),this.state.storeInfo=p.a.getStorageSync("store_info"),this.state.permission=p.a.getStorageSync("permission")}},{key:"componentDidShow",value:function(){console.log("show"),this.state.totalStatus.page=1,this.state.storeStatus.page=1,this.setState({showPop:0,listLoading:!0,totalPlays:[],storePlays:[],totalScrollTop:0,storeScrollTop:0}),this.state.current=1,this.searchTotalPlays(),this.state.current=0,this.searchTotalPlays()}},{key:"handleAddPlayToStore",value:function(t){console.log("Add ".concat(t," to store"));var e={adminId:this.state.adminInfo.adminId,sessionId:this.state.adminInfo.sessionId,play_id:t,store_id:this.state.storeInfo.store_id,appId:wx.getAccountInfoSync().miniProgram.appId,token:2*(y()().unix()+1e3)},s=this;Object(T["b"])(e).then((function(t){console.log(t.data),s.state.adminInfo.sessionId=t.data.data.sessionId,p.a.setStorage({key:"admin_info",data:s.state.adminInfo})}))}},{key:"onScrollToUpper",value:function(){}},{key:"onScroll",value:function(t){}},{key:"onScrollToUpperY",value:function(){console.log("top")}},{key:"onScrollToLowerYTotal",value:function(){this.state.totalStatus.page=this.state.totalStatus.page+1,this.searchTotalPlays()}},{key:"onScrollToLowerYStore",value:function(){this.state.storeStatus.page=this.state.storeStatus.page+1,this.searchTotalPlays()}},{key:"onScrollY",value:function(t){console.log(t.detail.scrollTop),0==this.state.current?this.state.totalScrollTop=t.detail.scrollTop:this.state.storeScrollTop=t.detail.scrollTop}},{key:"onChange",value:function(t){this.setState({value:t})}},{key:"handleNavBack",value:function(){this.state.showPop=0,p.a.navigateBack()}},{key:"searchTotalPlays",value:function(){console.log("--------start search-----------");var t,e,s,a,o,i,l={adminId:this.state.adminInfo.adminId,sessionId:this.state.adminInfo.sessionId,appId:wx.getAccountInfoSync().miniProgram.appId,token:2*(y()().unix()+1e3)};if(0==this.state.current){t=this.state.value,e=this.state.totalStatus.tagActiveNum,s=this.state.totalStatus.type1,a=this.state.totalStatus.type1,o=this.state.totalStatus.type1,i=this.state.totalStatus.page;var c=this;Object(T["r"])(l,"title=".concat(t,"&hd=").concat(e,"&type1=").concat(s,"&type2=").concat(a,"&type3=").concat(o,"&page=").concat(i)).then((function(t){console.log(t.data),c.setState({listLoading:!1,totalPlays:c.state.totalPlays.concat(t.data)})}))}else{var n=this.state.storeInfo.store_id;t=this.state.value,e=this.state.storeStatus.tagActiveNum,s=this.state.storeStatus.type1,a=this.state.storeStatus.type1,o=this.state.storeStatus.type1,i=this.state.storeStatus.page;var r=this;Object(T["q"])(l,"store_id=".concat(n,"&title=").concat(t,"&hd=").concat(e,"&type1=").concat(s,"&type2=").concat(a,"&type3=").concat(o,"&page=").concat(i)).then((function(t){console.log(t.data),r.setState({listLoading:!1,storePlays:r.state.storePlays.concat(t.data)})}))}}},{key:"onActionClick",value:function(){0==this.state.current?(this.state.totalStatus.page=1,this.setState({showPop:0,listLoading:!0,totalPlays:[]}),this.searchTotalPlays()):(this.state.storeStatus.page=1,this.setState({showPop:0,listLoading:!0,storePlays:[]}),this.searchTotalPlays())}},{key:"onTagClick",value:function(t){console.log(t),0==this.state.current?(this.state.totalStatus.tagActiveNum=t,this.setState({"totalStatus.tagActiveNum":t}),this.state.totalStatus.page=1,this.setState({listLoading:!0,totalPlays:[]}),this.searchTotalPlays()):(this.state.storeStatus.tagActiveNum=t,this.setState({"storeStatus.tagActiveNum":t}),this.state.storeStatus.page=1,this.setState({listLoading:!0,storePlays:[]}),this.searchTotalPlays())}},{key:"handleClick",value:function(t){console.log(this.state.totalScrollTop),console.log(this.state.storeScrollTop),this.setState({current:t,storeScrollTop:this.state.storeScrollTop+1e-9,totalScrollTop:this.state.totalScrollTop+1e-9})}},{key:"handleClickCover",value:function(){this.setState({showPop:0})}},{key:"handleMoreOptions",value:function(t){this.setState({showPop:t})}},{key:"handleDeletePlay",value:function(t,e){console.log("delete play_id_".concat(t," in ").concat(e));var s=p.a.getStorageSync("play_id_".concat(t)),a=this;wx.showModal({title:"\u5220\u9664\u5267\u672c",content:"\u786e\u5b9a\u5220\u9664 ".concat(s.play_name," (").concat(s.play_headcount,"\u4eba\u672c) \u5417\uff1f"),success:function(s){if(s.confirm){console.log("\u7528\u6237\u70b9\u51fb\u786e\u5b9a");var o={adminId:a.state.adminInfo.adminId,sessionId:a.state.adminInfo.sessionId,play_id:t,store_id:a.state.storeInfo.store_id,appId:wx.getAccountInfoSync().miniProgram.appId,token:2*(y()().unix()+1e3)};Object(T["e"])(o).then((function(t){console.log(t.data),1==t.data.code?(a.state.storePlays.splice(e,1),a.setState({storePlays:a.state.storePlays})):console.log(t.data.data)}))}else s.cancel&&console.log("\u7528\u6237\u70b9\u51fb\u53d6\u6d88")}})}},{key:"handleModifyPlay",value:function(t){console.log("modify play_id_".concat(t)),p.a.navigateTo({url:"../formPage/index?page=3&play_id=".concat(t)})}},{key:"render",value:function(){var t,e=this,s=wx.getSystemInfoSync().statusBarHeight,a=wx.getSystemInfoSync().screenHeight,i=wx.getSystemInfoSync().screenWidth,l=(wx.getSystemInfoSync().windowHeight,a/i*750),c=s/i*750,n=0,r=20,h={width:"75vw"},m={height:"".concat(l-c-320,"rpx")},y=[],j=[];return 0==this.state.listLoading?0==this.state.current?this.state.totalPlays.map((function(t,s){var a=[];999==t.play_male_num|999==t.play_female_num?a=[]:(a.push(Object(_["jsxs"])(d["q"],{className:"play-male-position-info",children:[Object(_["jsx"])("image",{className:"gender-icon-info",src:b.a}),Object(_["jsx"])("text",{children:t.play_male_num})]})),a.push(Object(_["jsxs"])(d["q"],{className:"play-female-position-info",children:[Object(_["jsx"])("image",{className:"gender-icon-info",src:f.a}),Object(_["jsx"])("text",{children:t.play_female_num})]})));for(var o=[],i=0;i<t.play_labels.length;i++)o.push(Object(_["jsx"])("text",{className:"play-label-info",children:t.play_labels[i]}));y.push(Object(_["jsxs"])(d["q"],{className:"at-row queue-tab-info",children:[Object(_["jsx"])(d["q"],{className:"at-row play-pic-position-info",style:"width:21vw",children:Object(_["jsx"])("image",{className:"play-pic-info",src:w["a"]+t.play_img,children:Object(_["jsx"])("text",{className:"play-pic-label-info",children:t.play_labels[0]})})}),Object(_["jsxs"])(d["q"],{className:"at-col play-intro-info",children:[Object(_["jsx"])(d["q"],{className:"at-col play-name-position-info",children:t.play_name}),Object(_["jsxs"])(d["q"],{className:"at-row",children:[Object(_["jsxs"])(d["q"],{className:"at-col",children:[Object(_["jsxs"])(d["q"],{className:"play-score-position-info",children:["\u96be\u5ea6",Object(_["jsxs"])(d["q"],{style:"display:flex;align-items:flex-end;padding-left:3%;position:relative;bottom:0%",children:[Object(_["jsx"])("image",{src:S.a,className:"play-score-pic-info",style:"position:relative;left:-0px;"}),Object(_["jsx"])("image",{src:S.a,className:"play-score-pic-info",style:"position:relative;left:-3px;"}),Object(_["jsx"])("image",{src:S.a,className:"play-score-pic-info",style:"position:relative;left:-6px;"})]})]}),Object(_["jsxs"])(d["q"],{className:"at-row play-headcount-position-info",children:[Object(_["jsx"])(d["q"],{className:"play-headcount-info",children:Object(_["jsxs"])("text",{decode:"{{true}}",children:[t.play_headcount,"\u4eba\u672c"]})}),a]})]}),Object(_["jsx"])(d["q"],{className:"at-row",style:"width:20vw",children:Object(_["jsx"])(u["b"],{type:"primary",circle:"true",className:"join-button",onClick:e.handleAddPlayToStore.bind(e,t.play_id),children:"\u6dfb\u52a0"})})]}),Object(_["jsx"])(d["q"],{className:"at-col play-label-position-info",children:o})]})]}))})):this.state.storePlays.map((function(t,s){p.a.setStorage({key:"play_id_".concat(t.play_id),data:t});var a=[];999==t.play_male_num|999==t.play_female_num?a=[]:(a.push(Object(_["jsxs"])(d["q"],{className:"play-male-position-info",children:[Object(_["jsx"])("image",{className:"gender-icon-info",src:b.a}),Object(_["jsx"])("text",{children:t.play_male_num})]})),a.push(Object(_["jsxs"])(d["q"],{className:"play-female-position-info",children:[Object(_["jsx"])("image",{className:"gender-icon-info",src:f.a}),Object(_["jsx"])("text",{children:t.play_female_num})]})));for(var o=[],i=0;i<t.play_labels.length;i++)o.push(Object(_["jsx"])("text",{className:"play-label-info",children:t.play_labels[i]}));j.push(Object(_["jsxs"])(d["q"],{className:"at-row queue-tab-info",children:[Object(_["jsx"])(d["q"],{className:"at-row play-pic-position-info",style:"width:21vw",children:Object(_["jsx"])("image",{className:"play-pic-info",src:w["a"]+t.play_img,children:Object(_["jsx"])("text",{className:"play-pic-label-info",children:"\u672c\u683c"})})}),Object(_["jsxs"])(d["q"],{className:"at-col play-intro-info",children:[Object(_["jsx"])(d["q"],{className:"at-col play-name-position-info",children:t.play_name}),Object(_["jsx"])(d["q"],{className:"at-row",children:Object(_["jsxs"])(d["q"],{className:"at-col",children:[Object(_["jsxs"])(d["q"],{className:"play-score-position-info",children:["\u96be\u5ea6",Object(_["jsxs"])(d["q"],{style:"display:flex;align-items:flex-end;padding-left:3%;position:relative;bottom:0%",children:[Object(_["jsx"])("image",{src:S.a,className:"play-score-pic-info",style:"position:relative;left:-0px;"}),Object(_["jsx"])("image",{src:S.a,className:"play-score-pic-info",style:"position:relative;left:-3px;"}),Object(_["jsx"])("image",{src:S.a,className:"play-score-pic-info",style:"position:relative;left:-6px;"})]})]}),Object(_["jsxs"])(d["q"],{className:"at-row play-headcount-position-info",children:[Object(_["jsx"])(d["q"],{className:"play-headcount-info",children:Object(_["jsxs"])("text",{decode:"{{true}}",children:[t.play_headcount,"\u4eba\u672c"]})}),a]})]})}),Object(_["jsx"])(d["q"],{className:"at-col play-label-position-info",children:o})]}),Object(_["jsxs"])(d["q"],{style:"position:absolute;right:50rpx;margin-top:20rpx;display:flex;flex-direction:column;align-items:flex-end;",children:[Object(_["jsx"])("image",{src:k.a,style:"height:40rpx;width:40rpx;transform:rotate(90deg);",onClick:e.handleMoreOptions.bind(e,t.play_id)}),Object(_["jsxs"])(d["q"],{className:"popover",style:{visibility:"".concat(e.state.showPop==t.play_id?"visible":"hidden")},children:[Object(_["jsx"])(d["q"],{style:"color:#000000;font-size:12px;",onClick:e.handleModifyPlay.bind(e,t.play_id),children:"\u7f16\u8f91 "}),Object(_["jsx"])(d["q"],{style:"height:1rpx;width:80%;border:0px solid #00000050;border-bottom-width:1rpx;"}),Object(_["jsx"])(d["q"],{style:"color:#000000;font-size:12px;",onClick:e.handleDeletePlay.bind(e,t.play_id,s),children:"\u5220\u9664 "})]})]})]}))})):0==this.state.current?y.push(Object(_["jsx"])(d["q"],{children:Object(_["jsx"])(u["a"],{mode:"center",size:64,content:"Loading...",className:"load"})})):j.push(Object(_["jsx"])(d["q"],{children:Object(_["jsx"])(u["a"],{mode:"center",size:64,content:"Loading...",className:"load"})})),Object(_["jsx"])(d["q"],{className:"JoinQueueSelectInfo",children:Object(_["jsxs"])(d["q"],{className:"at-col",style:{padding:"".concat(s,"px 0px 0px 0px")},children:[Object(_["jsx"])(u["g"],{className:"nav-bar-info",onClickLeftIcon:this.handleNavBack,color:"#ffff",leftIconType:"chevron-left",children:Object(_["jsx"])(d["q"],{style:"color:#fff;font-size:18px",children:"\u5267\u672c\u5217\u8868"})}),Object(_["jsxs"])(u["i"],{className:"tabs-info",current:this.state.current,scroll:!0,tabList:[{title:"\u5267\u672c\u603b\u5e93"},{title:"\u95e8\u5e97\u5e93"}],onClick:this.handleClick.bind(this),children:[Object(_["jsxs"])(u["j"],{current:this.state.current,index:0,children:[Object(_["jsx"])("image",{src:O.a,style:"width:100vw;height:100vh;position:absolute;"}),Object(_["jsx"])(d["q"],{className:"at-col",style:"height:150rpx;background-color:#FFFEFFFF;"}),Object(_["jsxs"])(d["j"],{className:"scrollviewY",scrollY:!0,scrollWithAnimation:!0,"show-scrollbar":"false",scrollTop:this.state.totalScrollTop,style:m,lowerThreshold:r,upperThreshold:r,onScrollToUpper:this.onScrollToUpperY.bind(this),onScrollToLower:this.onScrollToLowerYTotal.bind(this),onScroll:this.onScrollY.bind(this),children:[y,Object(_["jsx"])(d["q"],{className:"at-row tab-blank"})," "]})]}),Object(_["jsxs"])(u["j"],{current:this.state.current,index:1,children:[Object(_["jsx"])(d["q"],{style:{position:"absolute",height:"100vh",width:"100vw",background:"#00000000",visibility:"".concat(0==this.state.showPop?"hidden":"visible")},onClick:this.handleClickCover.bind(this)}),Object(_["jsx"])("image",{src:O.a,style:"width:100vw;height:100vh;position:absolute;"}),Object(_["jsx"])(d["q"],{className:"at-col",style:"height:150rpx;background-color:#FFFEFFFF;"}),Object(_["jsxs"])(d["j"],{className:"scrollviewY",scrollY:!0,scrollWithAnimation:!0,"show-scrollbar":"false",scrollTop:this.state.storeScrollTop,style:m,lowerThreshold:r,upperThreshold:r,onScrollToUpper:this.onScrollToUpperY.bind(this),onScrollToLower:this.onScrollToLowerYStore.bind(this),onScroll:this.onScrollY.bind(this),children:[j,Object(_["jsx"])(d["q"],{className:"at-row tab-blank"})," "]})]})]}),Object(_["jsxs"])(d["q"],{className:"at-col",style:{height:"150rpx",backgroundColor:"#FFFEFFFF",position:"absolute",top:"".concat(c+150+20,"rpx")},children:[Object(_["jsx"])(u["h"],{className:"search-bar-info",showActionButton:!0,value:this.state.value,onChange:this.onChange.bind(this),onActionClick:this.onActionClick.bind(this)}),Object(_["jsxs"])(d["q"],{className:"at-row",style:"margin-top: 2%;margin-bottom: 2%;",children:[Object(_["jsx"])(d["q"],{className:"",style:"width:15vw;align-items:flex-end;display:flex;justify-content:flex-end;",children:Object(_["jsx"])(u["k"],{className:"tag-button-info",name:"ALL",type:"primary",active:0==this.state.current?0==this.state.totalStatus.tagActiveNum:0==this.state.storeStatus.tagActiveNum,circle:!0,onClick:this.onTagClick.bind(this,0),children:"\u5168\u90e8"})}),Object(_["jsxs"])(d["j"],(t={className:"scrollview",style:"",scrollX:!0,scrollWithAnimation:!0,"show-scrollbar":"false",scrollTop:n},Object(o["a"])(t,"style",h),Object(o["a"])(t,"lowerThreshold",r),Object(o["a"])(t,"upperThreshold",r),Object(o["a"])(t,"onScrollToUpper",this.onScrollToUpper.bind(this)),Object(o["a"])(t,"onScroll",this.onScroll),Object(o["a"])(t,"children",[Object(_["jsx"])(u["k"],{className:"tag-num-button-info",name:"4p",type:"primary",active:0==this.state.current?4==this.state.totalStatus.tagActiveNum:4==this.state.storeStatus.tagActiveNum,circle:!0,onClick:this.onTagClick.bind(this,4),children:"4\u4eba"}),Object(_["jsx"])(u["k"],{className:"tag-num-button-info",name:"5p",type:"primary",active:0==this.state.current?5==this.state.totalStatus.tagActiveNum:5==this.state.storeStatus.tagActiveNum,circle:!0,onClick:this.onTagClick.bind(this,5),children:"5\u4eba"}),Object(_["jsx"])(u["k"],{className:"tag-num-button-info",name:"6p",type:"primary",active:0==this.state.current?6==this.state.totalStatus.tagActiveNum:6==this.state.storeStatus.tagActiveNum,circle:!0,onClick:this.onTagClick.bind(this,6),children:"6\u4eba"}),Object(_["jsx"])(u["k"],{className:"tag-num-button-info",name:"7p",type:"primary",active:0==this.state.current?7==this.state.totalStatus.tagActiveNum:7==this.state.storeStatus.tagActiveNum,circle:!0,onClick:this.onTagClick.bind(this,7),children:"7\u4eba"}),Object(_["jsx"])(u["k"],{className:"tag-num-button-info",name:"8p",type:"primary",active:0==this.state.current?8==this.state.totalStatus.tagActiveNum:8==this.state.storeStatus.tagActiveNum,circle:!0,onClick:this.onTagClick.bind(this,8),children:"8\u4eba"}),Object(_["jsx"])(u["k"],{className:"tag-num-button-info",name:"9p",type:"primary",active:0==this.state.current?9==this.state.totalStatus.tagActiveNum:9==this.state.storeStatus.tagActiveNum,circle:!0,onClick:this.onTagClick.bind(this,9),children:"9\u4eba"}),Object(_["jsx"])(u["k"],{className:"tag-num-button-info",name:"10p",type:"primary",active:0==this.state.current?10==this.state.totalStatus.tagActiveNum:10==this.state.storeStatus.tagActiveNum,circle:!0,onClick:this.onTagClick.bind(this,10),children:"10\u4eba"}),Object(_["jsx"])(u["k"],{className:"tag-num-button-info",name:"11p",type:"primary",active:0==this.state.current?11==this.state.totalStatus.tagActiveNum:11==this.state.storeStatus.tagActiveNum,circle:!0,onClick:this.onTagClick.bind(this,11),children:"11\u4eba"}),Object(_["jsx"])(u["k"],{className:"tag-num-button-info",name:"12p",type:"primary",active:0==this.state.current?12==this.state.totalStatus.tagActiveNum:12==this.state.storeStatus.tagActiveNum,circle:!0,onClick:this.onTagClick.bind(this,12),children:"12\u4eba"})]),t)),Object(_["jsx"])(d["q"],{className:"",style:"width:10vw;align-items:flex-end;display:flex;justify-content:center;",children:"o"})]})]})]})})}}]),s}(r["Component"]),P={navigationBarTitleText:"\u5267\u672c\u7ba1\u7406",disableScroll:!0};Page(Object(a["createPageConfig"])(q,"pages/playSearchPage/playSearchPage",{root:{cn:[]}},P||{}))}},[[301,0,1,2,3]]]);